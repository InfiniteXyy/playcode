import{R as e,d as t,F as a,a as n,p as r,L as s,I as o,T as l,r as c,c as i,b as m,i as p,x as u,e as d,l as f,f as g}from"./vendor.ef3ee35f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function y(a){const{header:n,left:r,right:s}=a;return e.createElement("div",{className:"h-full flex flex-col overflow-hidden"},e.createElement("header",{className:"flex-shrink-0 shadow-md z-10"},n),e.createElement(t.Container,{className:"flex-grow h-full overflow-hidden"},e.createElement(t.Section,null,r),e.createElement(t.Bar,{size:10,className:"bg-dark-700"}),e.createElement(t.Section,{className:"bg-black"},s)))}function h(){return e.createElement("div",null,e.createElement("div",{className:"flex h-15 justify-between items-center px-5"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("a",{href:"https://github.com/InfiniteXyy/playcode",target:"_blank",className:"leading-none"},e.createElement(a,{className:"h-[20px] w-[20px] text-dark-700"})),e.createElement("h1",{className:"font-medium"},"PlayCode"))))}var w,E;(E=w||(w={})).Cpp="cpp",E.Python="python",E.TypeScript="typescript";const x={[w.Cpp]:"C++",[w.Python]:"Python",[w.TypeScript]:"TypeScript"},v={[w.Cpp]:".cpp",[w.Python]:".py",[w.TypeScript]:".ts"};function b(){return new Worker("/playcode/assets/worker.e93feaa1.js",{type:"module"})}function N(e){let t;t=e===w.Cpp?new b:e===w.Python?new Worker("/playcode/assets/worker.77e66e64.js",{name:"python-worker"}):new Worker("/playcode/assets/worker.ed5806a0.js",{name:"typescript-worker"});const a=new MessageChannel;return t.postMessage({id:"constructor",data:a.port2},[a.port2]),{messagePort:a.port1,worker:t}}const k=n({code:{[w.Cpp]:'#include <stdio.h>\n\nint main() {\n    printf("Hello, C++!");\n    return 0;\n}',[w.Python]:'print("hello Python")',[w.TypeScript]:'const ts: string = "TypeScript"\nconsole.log(`hello ${ts}`)'},language:w.Cpp,workerMap:{}}).actions({setCode:(e,t)=>e.code[e.language]=t,setLanguage:(e,t)=>e.language=t,init:e=>{for(const t of Object.values(w))e.workerMap[t]=N(t)}}).methods((e=>({runCode(){const{code:t,language:a,workerMap:n}=e.getState();n[a].messagePort.postMessage({id:"compileLinkRun",data:t[a]})}}))).computed({messagePort:e=>{var t;return null==(t=e.workerMap[e.language])?void 0:t.messagePort}}).middleware((e=>r(e,{name:"runner-store",version:2,blacklist:["workerMap"]}))).build();function C(){const[t,{setLanguage:a}]=k.use((e=>e.language));return e.createElement("div",{className:"w-36 z-10"},e.createElement(s,{value:t,onChange:a},e.createElement("div",{className:"relative"},e.createElement(s.Button,{className:"relative w-full py-1 pl-3 pr-10 rounded-lg shadow-sm cursor-pointer text-left border-gray-200 border focus:outline-none text-sm"},e.createElement("span",{className:"block truncate"},x[t]),e.createElement("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},e.createElement(o,{className:"w-4 h-4 text-gray-400","aria-hidden":"true"}))),e.createElement(l,{as:c.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},e.createElement(s.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 pl-0 focus:outline-none sm:text-sm"},Object.keys(x).map((t=>e.createElement(s.Option,{key:t,value:t,className:({active:e})=>i(e?"text-amber-900 bg-amber-100":"text-gray-900","cursor-pointer select-none relative py-2 pl-4 pr-4 list-none")},(({selected:a})=>e.createElement(e.Fragment,null,e.createElement("span",{className:i(a?"font-medium":"font-normal","block truncate")},x[t])))))))))))}function P(){const[{code:t,language:a},{setCode:n,runCode:r}]=k.use();return e.createElement("div",{className:"h-full flex flex-col"},e.createElement("div",{className:"h-[50px] flex items-center justify-between px-4"},e.createElement("span",{className:"font-medium text-sm text-gray-700"},`test${v[a]}`),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(C,null),e.createElement("button",{className:"focus:outline-transparent leading-none"},e.createElement(m,{onClick:r,className:"text-green-500 h-5 w-5"})))),e.createElement(p,{value:t[a],language:a,options:{fontSize:17,minimap:{enabled:!1},wordWrap:"on"},wrapperClassName:"h-full",onChange:e=>n(e)}))}function S(){const t=c.exports.useRef(null),{messagePort:a}=k.useComputed(),[n]=c.exports.useState((()=>new u.exports.Terminal({fontFamily:"Sarasa Mono, Menlo"})));return c.exports.useEffect((()=>{n.open(t.current);const e=new d.exports.FitAddon;n.loadAddon(e);const a=new ResizeObserver(f.exports.debounce((()=>e.fit()),60));return a.observe(t.current),()=>{a.disconnect()}}),[]),c.exports.useEffect((()=>{if(!a)return;a.onmessage=e=>{switch(e.data.id){case"write":n.writeln(e.data.data)}}}),[a]),e.createElement("div",{className:"h-full",ref:t})}function M(){const{init:t}=k.useActions();return c.exports.useEffect((()=>{t()}),[]),e.createElement(y,{header:e.createElement(h,null),left:e.createElement(P,null),right:e.createElement(S,null)})}console.log({clang:"/playcode/assets/clang.2a466f0e.wasm",lld:"/playcode/assets/lld.36419ed2.wasm",memfs:"/playcode/assets/memfs.2c72ee42.wasm",sysroot:"/playcode/assets/sysroot.2435a7b5.tar"});g.render(e.createElement(M,null),document.getElementById("app"));
